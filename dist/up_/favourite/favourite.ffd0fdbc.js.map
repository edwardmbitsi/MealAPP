{"mappings":"AAAA,YAAY;AACZ,MAAM,yBAAyB,SAAS,eACtC;AAGF,kBAAkB;AAClB,SAAS,iBAAiB,oBAAoB;AAC9C,uBAAuB,iBAAiB,SAAS;AAEjD,YAAY;AACZ,2CAA2C;AAC3C,SAAS;IACP,IAAI;IAEJ,IAAI,aAAa,QAAQ,kBAAkB,MAAM;QAC/C,mBAAmB,EAAE;QACrB;IACF,OACE,mBAAmB,KAAK,MAAM,aAAa,QAAQ;IAGrD,IAAI,UAAU;IACd,6CAA6C;IAC7C,iBAAiB,QAAQ,CAAC;QACxB,MAAM,CAAC,qDAAqD,EAAE,OAAO,CAAC,EACnE,KAAK,CAAC,WAAa,SAAS,QAC5B,KAAK,CAAC,OAAS,kBAAkB,KAAK,KAAK,CAAC,EAAE,EAAE;IACrD;AACF;AAEA,0DAA0D;AAC1D,SAAS,kBAAkB,IAAI,EAAE,OAAO;IACtC,UAAU,CAAC,qEAAqE,EAAE,KAAK,OAAO;;oBAE5E,EAAE,KAAK,aAAa;;;YAG5B,EAAE,KAAK,QAAQ;;;UAGjB,CAAC;IACT,uBAAuB,aAAa;AACtC;AAEA,0CAA0C;AAC1C,SAAS,qBAAqB,KAAK;IACjC,IAAI,CAAC,MAAM,OAAO,UAAU,SAAS,uBACnC;IAEF,oDAAoD;IACpD,IAAI,gBAAgB,MAAM,OAAO;IACjC,QAAQ,IAAI;IACZ,IAAI,SAAS,cAAc;IAC3B,IAAI,mBAAmB,KAAK,MAAM,aAAa,QAAQ;IAEvD,kDAAkD;IAClD,IAAI,MAAM,iBAAiB,QAAQ;IAEnC,+DAA+D;IAC/D,iBAAiB,OAAO,KAAK;IAC7B,aAAa,QAAQ,cAAc,KAAK,UAAU;IAElD,gCAAgC;IAChC,cAAc;AAChB","sources":["favourite/favourite_script.js"],"sourcesContent":["// Selectors\r\nconst favouriteMealContainer = document.getElementById(\r\n  \"favourite-meals-container\"\r\n);\r\n\r\n// Event Listeners\r\ndocument.addEventListener(\"DOMContentLoaded\", getFavouriteMeals);\r\nfavouriteMealContainer.addEventListener(\"click\", removeFromFavourites);\r\n\r\n// Functions\r\n// fetches and displays all favourite meals\r\nfunction getFavouriteMeals() {\r\n  let favouriteMealsId;\r\n\r\n  if (localStorage.getItem(\"favourites\") === null) {\r\n    favouriteMealsId = [];\r\n    return;\r\n  } else {\r\n    favouriteMealsId = JSON.parse(localStorage.getItem(\"favourites\"));\r\n  }\r\n\r\n  let content = \"\";\r\n  // loop over each meal ID and fetch for meals\r\n  favouriteMealsId.forEach((mealId) => {\r\n    fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${mealId}`)\r\n      .then((response) => response.json())\r\n      .then((data) => addfavouriteMeals(data.meals[0], content));\r\n  });\r\n}\r\n\r\n// helper funtion that appends favourite meal to container\r\nfunction addfavouriteMeals(meal, content) {\r\n  content = `<div class = \"meal-item d-flex flex-column align-items-center\" id = \"${meal.idMeal}\">\r\n    <div class = \"meal-img\">\r\n        <img src = \"${meal.strMealThumb}\" alt = \"food\">\r\n    </div>\r\n    <div class = \"meal-name\">\r\n        <h3>${meal.strMeal}</h3>\r\n    </div>\r\n    <button type=\"submit\" class=\"btn btn-sm btn-outline-primary unfavourite-button\"> Remove From Favourites </button>\r\n    </div>`;\r\n  favouriteMealContainer.innerHTML += content;\r\n}\r\n\r\n// to remove favourites from local storage\r\nfunction removeFromFavourites(event) {\r\n  if (!event.target.classList.contains(\"unfavourite-button\")) {\r\n    return;\r\n  }\r\n  // if unfavourite button is clicked get id of parent\r\n  let favouriteMeal = event.target.parentElement;\r\n  console.log(favouriteMeal);\r\n  let mealId = favouriteMeal.id;\r\n  let favouriteMealsId = JSON.parse(localStorage.getItem(\"favourites\"));\r\n\r\n  // find the id in the array of all favourite meals\r\n  let idx = favouriteMealsId.indexOf(mealId);\r\n\r\n  // remove the id from the array and save array in local storage\r\n  favouriteMealsId.splice(idx, 1);\r\n  localStorage.setItem(\"favourites\", JSON.stringify(favouriteMealsId));\r\n\r\n  // remove favourite meal element\r\n  favouriteMeal.remove();\r\n}\r\n"],"names":[],"version":3,"file":"favourite.ffd0fdbc.js.map","sourceRoot":"/__parcel_source_root/"}